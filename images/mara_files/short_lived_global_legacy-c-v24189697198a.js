require(["ta/rollupAmdShim"],function(a){a.install(["lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","utils/localstorage","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","overlays/options/repositionOnTaEvent","ta/Core/TA.FireEvent","ta/util/ActionRecord","ta/util/Cookie","ta/popups/CookieSettingsPanel","ta/util/Currency","vanillajs","utils/ajax","common/Radio","ta/registration/RegEvents","api-mod","ta/Core/TA.Store"],["page-model"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"short_lived_global_legacy",files:{js3_secure:{ssl:{ta:{Core:{"TA.Record":1}}}},"js-amd":{src:{common:{Radio:1},utils:{ajax:1,localstorage:1},"api-mod":1,overlays:{options:{fade:1,matchWidth:1,autoReposition:1,centerArrowOnSrcElement:1,repositionOnTaEvent:1,closeOnDocClick:1,closeOnScroll:1},styles:{flyout:1},position:1,Overlay:1},vanillajs:1}},js3:{lib:{"jquery-amd":1},src:{ta:{util:{Cookie:1,ActionRecord:1,Currency:1},popups:{CookieSettingsPanel:1},registration:{RegEvents:1},Core:{"TA.FireEvent":1,"TA.Event":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
define("lib/jquery-amd",[],function(){return window.Zepto||ta.jquery||window.jQuery});
define("ta/Core/TA.Record",["vanillajs","ns-exporter","ta/Core/TA.Store","purify","ajax-request"],function(e,t,n,r,a){"use strict";var i={},o={},l=[],u=8,c="impressionTrackingTree",s=0,d=1,g=2,f="UserTracking",v="impression",p="action",m="pageview",h="search",k=[],y=60,E=function(e){return"function"==typeof e},T=function(e,t){try{if(!e||"object"!=typeof t)return;if(window.JSON&&JSON.stringify){var n=JSON.stringify(t);n&&n.length<1e5&&(k.push([e,n]),k.length>y&&k.shift())}}catch(e){}},P=function(e,t,n,r){a(e,t).then(n,r),T(e,t)},_=function(){if(require.defined("ta/util/Error")){var e=require("ta/util/Error");e.record.apply(e,arguments)}else ta&&ta.m&&E(ta.m.recordJSError)&&ta.m.recordJSError(arguments)},b=function(e){return"undefined"==typeof e||null==e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*"))},S=function(e){var t=[];for(var n in e){var r=e[n];t.push(b(n)+"."+b(r))}return t.join("*")},C=function(e){return"undefined"==typeof e||null===e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*").replace(/\~/g,"!~"))},w=function(e){var t=[];for(var n in e){var r=e[n];t.push(C(n)+"."+C(r))}return t.join("*")},A=function(e){var t=/(https?:\/\/[^\/]+)?\/([^#.?-]*)/,n=t.exec(e);return n&&"undefined"!=typeof n[2]?n[2]?n[2]:"Home":null},N=function(){var e=i.getPageData();if(e&&e.url)return e.url.substring(1);var t=/\/([^-]*)/.exec(window.location.pathname);return t?t[1]:null},R=function(e,t,n){var r=new RegExp("(-"+t+"([0-9]+))|([?&]"+n+"=([0-9]+))"),a=r.exec(e);if(a){if("undefined"!=typeof a[2])return a[2];if("undefined"!=typeof a[4])return a[4]}return null},M=function(e){return R(e,"d","detail")||R(e,"g","geo")},I=function(e){var t=document.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");return!!t&&(t=t[1],0===t.indexOf("%1%")&&(t=t.substring(3)),decodeURIComponent(t))},O=function(e,t,n){try{var r;n.encode&&(t=encodeURIComponent(t)),n.domain&&(t+="; domain="+n.domain),n.path&&(t+="; path="+n.path),n.duration&&(r=new Date,r.setTime(r.getTime()+1e3*n.duration),t+="; expires="+r.toGMTString()),n.secure&&(t+="; secure"),document.cookie=e+"="+t}catch(e){_(e,"_setCookieInSeconds",null,arguments)}},x=function(){return ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")?ta.m.store.get("bookingSessionId"):null},L=function(){var e=!1;return"boolean"==typeof ta.userLoggedIn&&(e="boolean"==typeof ta.userSecurelyLoggedIn?ta.userLoggedIn?ta.userSecurelyLoggedIn?g:d:s:ta.userLoggedIn),e},q=function(e,t){var r={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:N(),gasl:M(document.location.href),gads:A(t),gadl:M(t),gapu:ta.uid,gams:L()},a=x();if(!r.gass)throw new Error("Src servlet undefined, gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);if(!r.gads)throw new Error("Dst servlet undefined. gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);n.has("gatt")&&(r.gatt=n.retrieve("gatt")),a&&(r.bsid=a),O("EVT",S(r),{domain:cookieDomain,duration:5,encode:!0,path:"/"})},D=function(e){if(!e||!e.className||!e.firstChild)return!1;var t=new RegExp("\\b"+c+"\\b"),n=e.firstChild.nodeType,r=e.firstChild.nodeValue;return t.test(e.className)&&n===u&&""!==r},H=function(){};require.defined("page-model")&&require(["page-model"],function(e){var t=e.session,r=t.analyticsInfo;r&&(n.keep("partials.pageProperties",r.pagePropertyStringForCurrentPageview),n.store("gaMemberState",r.memberState),t.analyticsInfo&&require.defined("ta/Core/TA.Prerender")&&require("ta/Core/TA.Prerender")._init(!0)),H=function(){r&&l.push(JSON.parse(r.jsonForCurrentPageview)),H=function(){}}}),i.getPageData=function(){return H(),l[l.length-1]},i.pushPageData=function(e){H(),e&&l.push(e)},i._GARecordRequest=function(e,t){var r,a={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:N(),gasl:document.location?M(document.location.href):null,gapu:ta.uid,gams:L()},i=x();return t&&(a.gacl=t),n.has("gatt")&&(a.gatt=n.retrieve("gatt")),i&&(a.bsid=i),r=require.defined("utils/BatchRequest")?{get:function(){require("utils/BatchRequest").queue("/GARecord",a)}}:{get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/GARecord?"+U(a),!0),e.send(null)},1)}},T("/GARecord",a),r};var U=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};o.urlArgLookup=function(e,t){var n=new RegExp("[\\?&]"+e+"=(\\w+)"),r=n.exec(t);return r&&"undefined"!=typeof r[1]?r[1]:null},i._validatedTrackEventArray=function(e,t,n,r,a){return e&&"string"!=typeof e&&(e=e.toString()),t&&"string"!=typeof t&&(t=t.toString()),n&&"string"!=typeof n&&(n=n.toString()),r?"number"!=typeof r&&(r=parseFloat(r),isNaN(r)&&(r=0)):r=0,"boolean"!=typeof a&&(a=a===!0),["_trackEvent",e,t,n,r,a]},i._toEvtParams=function(e){try{var t={gac:e.module,gaa:e.action,gal:e.context,gav:e.value,gani:e.noninteraction};return t.gass=N(),t.gasl=M(document.location.href),t.gapu=ta.uid,t.gams=L(),t}catch(t){_(t,"analytics._toEvtParams",null,e)}},i._trackEventAfterAjax=function(e){try{o.trackDMPBehavior(e.module,e.action,e.context,e.value,e.noninteraction)}catch(t){_(t,"analytics._trackEventAfterAjax",null,e)}},o.getEventPathOptions=function(e,t,n){try{var r=F(n,e);if(!r)return void _(null,"ta.getEventPathOptions - invalid element",null,arguments);var a=X(r);return t&&(a.noninteraction=t),a}catch(e){_(e,"ta.getEventPathOptions",null,arguments)}},i._trackEventPathAfterAjax=function(e){try{o.trackEventOnPage(e.category,e.action,e.label,e.value,e.noninteraction)}catch(e){_(e,"analytics._trackEventPathAfterAjax",null,arguments)}},o.trackPhysicalCommerce=function(e,t,n,r){try{var a=i._validatedTrackEventArray(e,"Commerce-Physical",t,n,!1);i._GARecordRequest(a,r).get()}catch(e){_(e,"ta.trackPhysicalCommerce",null,arguments)}},o.trackAttemptedCommerce=function(e,t,n){try{o.trackDMPBehavior(e,t,n,null,null)}catch(e){_(e,"ta.trackAttemptedCommerce",null,arguments)}},o.trackPhysicalAndAttemptedCommerce=function(e,t,n,r,a){o.trackPhysicalCommerce(e,t,r,a),o.trackAttemptedCommerce(e,t,n,r)},o.trackImpressionEventOnPage=function(e,t,n,r){e=e||"",t=t||"",n=n||"",r=r||0,o.trackEventOnPage(e,t,n,r,!0)},o.trackEventOnPage=function(e,t,n,r,a){try{var l=i._validatedTrackEventArray(e,t,n,r,a);i._GARecordRequest(l).get(),o.trackDMPBehavior(e,t,n,r,a)}catch(e){_(e,"ta.trackEventOnPage",null,arguments)}},o.trackEventOnPageOnce=function(e,t,r,a){var i,l="eventsAlreadyTracked";i="object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.get(l):n.retrieve(l),i||(i={},"object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.add(l,i):n.store(l,i));var u=e+"|"+t+"|"+r;i[u]||(o.trackEventOnPage(e,t,r,0,a),i[u]=!0)},o.trackDMPBehavior=function(e,t,n,r,a){try{if(require.defined("ta/common/behavior/dmp/DMP")){var i=require("ta/common/behavior/dmp/DMP");i.isEnabled()&&i.sendGABehavior(e,t,n,r,a)}}catch(e){_(e,"Error adding and sending GARecord behavior to DMP")}},o.setEvtCookie=function(e,t,n,r,a){try{var o=i._validatedTrackEventArray(e,t,n,r,!1);if(q(o,a),require.defined("ta/common/behavior/dmp/DMP")){var l=require("ta/common/behavior/dmp/DMP");l.isEnabled()&&l.sendEventBehavior(e,t,n,r,V())}}catch(e){_(e,"ta.setEvtCookie",null,arguments)}};var j=function(e){var t;try{if(t=I("MEVT")||"",t.length>0&&(t+="~"),t+=w(e),t.length>1024)throw"MEVT Cookie is full";O("MEVT",t,{domain:cookieDomain,duration:5,encode:!0})}catch(e){return _(e,"_appendMevtCookie",null,arguments),!1}return!0},G="trk",B=G.length,J="etk",W=/^([A-Z]{1,2}:)?[A-Za-z_0-9\-\.]+$/,V=function(){var e="undefined"!=typeof event?event:window.event;return e?e.target||e.srcElement:document.activeElement};i.getCommentTrackingPath=function(e,t){return F(e,t)};var F=function(e,t){if(e=r(e),!e&&(e=V(),!e))return _(null,"_getCommentTrackingPath - no element provided or event target element",null,arguments),null;if(1!=e.nodeType)return null;var n=[];if(t&&"string"==typeof t&&""!==t&&W.test(t)){if("P:"==t.substring(0,2))return n.push(t.substring(2)),n;n.push(t)}if("undefined"==typeof e.previousSibling)return _(null,"_getCommentTrackingPath - browser does not support previousSibling",null,arguments),n;e:for(var a=e;a!=document.body;a=a.parentNode){if(null==a){_(null,"_getCommentTrackingPath - LOOP_PARENT_NODES got unexpected null node",null,arguments);break}for(var i=0,o=a.previousSibling;null!=o;o=o.previousSibling)if(o.nodeType==u){var l=o.nodeValue;if(l==J){i++;continue}if(l.substring(0,B)!=G)continue;if(i>0){i--;continue}var c=l.substring(B).split("/");c||_(null,'ta._getCommentTrackingPath - cannot split context class: "'+l+'"',null,arguments);for(var s=c.length-1;s>=0;s--){var d=c[s],g=W.exec(d);if(g){if("P:"==g[1]){var f=g[0].substring(2);n.push(f);break e}n.push(g[0])}else _(null,'ta._getCommentTrackingPath - tracking prefix used with invalid context: "'+c[s]+'"',null,arguments)}}}return n},X=function(e){if(0===e.length)return null;var t={action:e[0],label:"",value:"1",category:e[e.length-1]};e.shift();for(var n=e.length-2;n>=0;n--)t.label+=e[n],n>0&&(t.label+="/"),"N:"==e[n].substring(0,2)&&(t.value=e[n].substring(2));return""===t.label&&(t.label="Unknown"),t};o.trk=function(e,t,n,a){n=r(n);try{var i=n?n.getAttribute("data-trk-path"):null;if(i)i=i.replace("P:",""),i=i.split("/"),i.reverse();else if(i=F(n,e),!i||!i.length){var l="";if(n)if(n.outerHTML){var u=document.createTextNode(n.outerHTML),c=document.createElement("div");c.appendChild(u),l=c.innerHTML.substring(0,100)}else n.nodeName?l=n.nodeName:l+=n;else void 0===n?l="undefined":null===n&&(l="null");return e||(e=null===i?"null path":void 0===i?"undefined path":i.hasOwnProperty("length")?0===i.length?"empty path":i.join(","):"path: "+i),void _(null,"ta.trk - invalid element for "+e+" from "+l,null,arguments)}o.trkWithPath(i,t,a)}catch(e){_(e,"ta.trk",null,arguments)}},o.trkWithPath=function(e,t,n){try{if(!e||!e.length)return void _(null,"ta.trkWithPath - no path in arguments",null,arguments);if(n&&n.length>0&&e.length&&e.splice)for(var r=n.length-1;r>=0;r--)"string"==typeof n[r]&&e.splice(1,0,n[r]);var a=X(e);o.trackEventOnPage(a.category,a.action,a.label,a.value,t)}catch(e){_(e,"ta.trkWithPath - "+e,null,arguments)}},o.trkImpTree=function(e){try{if(!D(e))return void _(null,"ta.trkImpTree called with invalid trackTreeElem!",null,arguments);var t=e.firstChild.nodeValue;Y(t)}catch(e){_(e,"ta.trkImpTree",null,arguments)}},o.recordImpression=function(e,t){if(!e)return void(t&&t());try{Y($(e),t)}catch(e){_(e,"ta.recordImpression",null,arguments),t&&t()}};var Z="<!--",z="-->",$=function(e){var t=e.indexOf(Z),n=0,r=e.indexOf(z);return t!==-1&&(n=t+Z.length),r===-1&&(r=e.length),e.substring(n,r)};i.stripCommentsFromTree=$;var K="\\",Q="/";i.appendAscendTokens=function(e){var t=0,n=0,r=0;for(t=0;t<e.length;t++)if(e[t]===Q)r++;else if(e[t]===K)for(n=t+1;n<e.length&&e[n]===K;)r--,t=n,n++;if(r>0)for(t=0;t<r;t++)e+=K;return e};var Y=function(e,t,n){var r={tTreeStr:e&&e.trim(),tTreeUid:ta.uid&&ta.uid.trim(),tTreeLastReferrer:window.location.href,tTreeIsMemberSignedIn:L()};ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")&&(r.bsid=ta.m.store.get("bookingSessionId")),r.tTreeStr?r.tTreeUid||_(new Error("tTreeUid is null/undefined/empty."),"ta._sendTreeImpression",null):_(new Error("tTreeStr is null/undefined/empty."),"ta._sendTreeImpression",null),P("/ImpressionRecord",{method:"POST",url:"/ImpressionRecord",data:r},t,function(){_(new Error("Server did not get tracking tree: "+e,"ta._sendTreeImpression"))})};o.setEvtCookieAndPath=function(e,t,n){try{n||(n=V());var r=F(n,e);if(!r)return void _(null,"ta.setEvtCookieAndPath - invalid element for "+e,null,arguments);var a=X(r);if(!t){for(;"A"!=n.nodeName&&n!=document.body;)n=n.parentNode;if(t=n.href,!t)return void _(null,"ta.setEvtCookieAndPath - no url parameter and cannot find a.href",null,arguments)}o.setEvtCookie(a.category,a.action,a.label,a.value,t)}catch(e){_(e,"ta.setEvtCookieAndPath",null,arguments)}},o.recordPageview=function(e,t){if(e){var n=A(e),r="/PageviewRecord",a=t?t:{};n&&(a.servletName=n,P(r,{method:"POST",data:a}))}},o.recordTabView=function(e,t,n){if(e&&t){var r=e+"-"+t,a="/PageviewRecord",i=n?n:{};i.servletName=r,P(a,{method:"POST",data:i})}},o.resetPageDataUrl=function(){var e=i.getPageData();e&&(e.url="")},o.trackEngagementClick=function(e,t){return e&&t?E(t)?void t(e):void _(new Error("passed variable selectionFunction is not a function"),"ta.trackEngagementClick",null,t):void _(new Error("object/selectionFunction is null/undefined"),"ta.trackEngagementClick",null,arguments)},o.placementNodeSelectorTracker=function(e){if(!e||!e.element||!e.type)return void _(new Error("object/element/type is null/undefined"),"ta.placementNodeSelectorTracker",null,e);var t,n,r,a,l,u,c=e.element,s=e.type,d=i.getCommentTrackingPath(c);if(s+="_Click",!d)return void _(new Error("trackTreePath is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);if(d.length<1)return void _(new Error("trackTreePath is missing information"),"ta.placementNodeSelectorTracker",null,arguments);if(t=d[d.length-1],!t)return void _(new Error("placement is null/undefined"),"ta.placementNodeSelectorTracker",null,d);for(u=d.length-1;u>=0;u--)if(l=d[u],l&&0===l.indexOf("N:")){n=l;break}if("HH_MainList"===t||"Maps_MetaBlock"===t)n="N:1";else if(!n)return void _(new Error("positionNode is null/undefined"),"ta.placementNodeSelectorTracker",null,d);if(r=n.split(":"),!r||2!==r.length)return void _(new Error("positionSplit appears to be incorrect"),"ta.placementNodeSelectorTracker",null,arguments);if(a=r[1],!a)return void _(new Error("position is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);var g=parseInt(a,10);if(isNaN(g))return void _(new Error("position is not a number"),"ta.placementNodeSelectorTracker",null,a);var f=te(t);if(f!==-1){a=g+f,t=ee(t);var v,p=document.querySelectorAll(".ui_tab_bar .ui_tab.selected");1===p.length&&(p=p[0],v=p.getAttribute("data-currentSort")),o.trackEventOnPage(t,s,v,a)}};var ee=function(e){if(!e)return e;if("Hotels"!==N())return"Clicks_"+e;var t;return"Hotels_MainList"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e?t="Clicks_"+e:"hotels_list_short_cells2"===e?t="Clicks_Hotels_MainList":"sponsored_coupon_listing"===e&&(t="Clicks_Hotels_MainList_Sponsored"),document.getElementById("sponsoredCouponListingWrap")&&"Clicks_Hotels_MainList"===t&&(t+="_Sponsored"),t+=ta.widgets.calendar.getCheckRatesData()?"_PostDates":"_PreDates"},te=function(e){if(!e)return _(new Error("placement is null/undefined"),"ta._shiftOrdinalsWithSponsoredPlacement",null,e),-1;if("Hotels"!==N())return 0;var t=0,r=n.retrieve("hac.offset");if(r&&r>0&&(t=r),!document.getElementById("sponsoredCouponListingWrap"))return t;var a,i=document.querySelector("#HAC_RESULTS .pageNumbers .current");if(i){var o=i.getAttribute("data-page-number");if(a=parseInt(o,10),isNaN(a)||!a)return _(new Error("pageNumber is not a number"),"ta._shiftOrdinalsWithSponsoredPlacement",null,o),-1}return"hotels_list_short_cells2"===e||"Hotels_MainList"===e?t+=a:(r&&r>0&&("sponsored_coupon_listing"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e)&&(t+=a-1),t)};o.getRecentTARecords=function(){return k},o.addTypeAheadMevt=function(e){return e.t="ta",j(e)},o.addGARecordMevt=function(e,t,r,a,o){try{var l=i._validatedTrackEventArray(e,t,r,a,!1),u={t:"ga",gac:l[1],gaa:l[2],gal:l[3],gav:l[4],gani:l[5],gass:N(),gasl:M(document.location.href),gads:A(o),gadl:M(o),gapu:ta.uid,gams:L()},c=x();if(!u.gass)throw new Error("Src servlet undefined, gac:"+u.gac+", gaa:"+u.gaa+", gal:"+u.gal);if(!u.gads)throw new Error("Dst servlet undefined. gac:"+u.gac+", gaa:"+u.gaa+", gal:"+u.gal);if(n.has("gatt")&&(u.gatt=n.retrieve("gatt")),c&&(u.bsid=c),j(u),require.defined("ta/common/behavior/dmp/DMP")){var s=require("ta/common/behavior/dmp/DMP");s.isEnabled()&&s.sendEventBehavior(e,t,r,a,V())}}catch(e){_(e,"ta.addGARecordMevt",null,arguments)}};var ne=!1,re=function(e,t){return ne||(ne=require.defined("page-model")?require("page-model").session:{}),!!ne.useERUserTracking&&!(ne.ERUserTrackingEventNames&&ne.ERUserTrackingEventNames.length>0&&ne.ERUserTrackingEventNames.indexOf(e)<0)},ae=function(e,t,n){if(re(e,t)){var r={event_name:e,event_type:t,attr:JSON.stringify(n)},a={get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/UserTrackingRecord?"+U(r),!0),e.send(null)},1)}};return a.get()}n.event_name=e,o.trackEventOnPage(f,t,JSON.stringify(n))};o.trackImpressionWithJson=function(e,t){ae(e,v,t)},o.trackActionWithJson=function(e,t){ae(e,p,t)},o.trackPageviewWithJson=function(e,t){ae(e,m,t)},o.trackSearchWithJson=function(e,t){ae(e,h,t)},o.trackUnifiedEvent=ae,t.createNs(i,"ta","analytics"),t.exportTo(o,"ta");var ie={};return t.exportTo(i,ie),t.exportTo(o,ie),ie});
define("ta/Core/TA.Event",["vanillajs","common/trackingStreams","ns-exporter","ta/Core/TA.FireEvent"],function(vanilla,tracks,nsExporter,fireEvent){function _makeClosure(e,t){var n=this;return t=Array.prototype.slice.call(t),function(){e.apply(n,t)}}function QueueTimer(e,t){var n=0,r=0,o=[],a=0,u=!1;this.start=function(){n&&clearTimeout(n),a=Date.now()},this.end=function(i){var c=Date.now(),f=c-a;r+=f;var l=""+f+"ms ["+(i||"")+"]",s=e+(t?"-after":"");u?console.error("Straggler for "+s+": "+l):(o.push(l),n=setTimeout(function(){console.error("Timing for "+s+": "+r+"ms\n"+o.sort(function(e,t){return parseInt(e)-parseInt(t)}).join("\n")),u=!0},2e3))}}var exports={on:fireEvent.on,off:fireEvent.off,fireEvent:fireEvent.fireEvent,hasEventListener:fireEvent.hasEventListener};exports.call=function(e,t,n,r){if(null==t)return IS_DEBUG&&alert("You must pass the event.\n\nUsage:\nta.call('ta.namespace.Class.function', event);"),!1;if(null==e)return IS_DEBUG&&alert("ta.call of undefined function"),!1;var o=e;if("function"==typeof e)e="<func>";else if(!/^ta\.[\w\d\.]+$/.test(e))return IS_DEBUG&&alert("Invalid function name. Must be of the form: ta.namespace.Class.function"),!1;var a=t||window.event;["stopPropagation","preventDefault"].forEach(function(e){a[e]||(a[e]=function(){})}),a.stop||(a.stop=function(){a.preventDefault(),a.stopPropagation()}),n||(n=a.target||a.srcElement),n||tracks.error(null,"ta.call re-wrap fail (non-DOM element) - "+e,t,{"funcName":e});var u=arguments,i=Array.prototype.slice.call(u,3);i.splice(0,0,a,n);try{return i.unshift({callback:_ta_call_defer,evt:a}),i.unshift(o),exports.run.apply(null,i)}catch(n){tracks.error(n,"ta.call - "+e,t)}return!1};var _ta_call_defer=function(e,t){t&&delete t.evt,exports.run.apply(null,arguments)};exports.run=function(e,t){var n=arguments,r=Array.prototype.slice.call(n,2);try{var o=exports.fn(e);if("function"==typeof o){var a=o.apply(window,Array.prototype.slice.call(r));if(t&&t.onComplete){var u=exports.fn(t.onComplete);u&&u(a)}return a}t&&t.evt&&(t.evt.stopPropagation?t.evt.stopPropagation():t.evt.cancelBubble=!0,t.evt.preventDefault?t.evt.preventDefault():t.evt.returnValue=!1);var i=_makeClosure(t&&t.callback||exports.run,arguments);require(["trjs!ta/Core/TA.Load"],function(t){try{t.load(e,i)}catch(t){tracks.error(t,"ta.run - "+e)}})}catch(t){tracks.error(t,"ta.run - "+e)}return!1};var OneTimeFunctionQueue=function(e,t,n){function r(){u=!0,c()}var o,a=[],u=!!n,i=function(n,r){o&&o.start();try{n()}catch(n){try{tracks.error(n,"OneTimeFunctionQueue "+e+(t?"-after":"")+(r?"-"+r:""))}catch(e){}}o&&o.end(r)},c=function(){if(a.sort(function(e,t){return e.priority-t.priority||e.subpriority-t.subpriority}),t){var e=1;a.forEach(function(t){setTimeout(i.bind(null,t.func,t.name),e++)})}else a.forEach(function(e){i(e.func,e.name)});a=[]};null!=e&&(window.addEventListener?window.addEventListener(e,r,!1):window.attachEvent&&("DOMContentLoaded"==e?window.attachEvent("onload",r):"load"==e?window.attachEvent("on"+e,function(){setTimeout(r,1)}):window.attachEvent("on"+e,r))),this.addToQueue=function(t,n,r){return t?("string"==typeof n&&(r=n,n=!1),void(u?i(t,r):(n=n||100+a.length,a.push({func:t,priority:n,name:r,subpriority:a.length})))):void tracks.error(null,"addToQueue for "+e+" queue - no function")},this.executeQueue=function(){c()}},loaded="undefined"!=typeof document&&"complete"===document.readyState,ready="undefined"!=typeof document&&"interactive"===document.readyState||loaded,_readyQ=new OneTimeFunctionQueue("DOMContentLoaded",!1,ready),_loadQ=new OneTimeFunctionQueue("load",!1,loaded),_afterLoadQ=new OneTimeFunctionQueue("load",!0);ready||_loadQ.addToQueue(function(){_readyQ.executeQueue()},-999999999,"checkReadyQueue"),_loadQ.addToQueue(function(){_afterLoadQ.executeQueue()},999999999,"afterLoadQueue"),exports.queueForReady=function(e,t,n){_readyQ.addToQueue(e,t,n)},exports.queueForLoad=function(e,t,n){_loadQ.addToQueue(e,t,n)},exports.queueForAfterLoad=function(e,t){_afterLoadQ.addToQueue(e,0,t)},exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=!1;try{f=eval(fn)}catch(e){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(e){}}if(f&&"function"==typeof f)return f}return null},exports.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},exports.throttle=function(e,t,n,r){function o(){delete m_throttles[t],a.cb()}var a,u=(new Date).getTime();if(t in m_throttles){if(a=m_throttles[t],u-a.lastReset<a.minResolution)return void(a.cb=e)}else a=m_throttles[t]={start:u,minResolution:Math.max(Math.floor(n/10),50)};a.cb=e,a.timeout&&clearTimeout(a.timeout),r&&u-a.start>r?o():(a.lastReset=u,a.timeout=setTimeout(o,n))};var m_throttles={};return nsExporter.exportTo(exports,ta),exports});
define("utils/localstorage",["vanillajs"],function(t){function e(t){return r(t,"value")}function n(t){return r(t,"now")}function r(t,e){if(!e)return null;try{var n=JSON.parse(h.getItem(t)||"0");return n?n.ttl&&n.ttl+n.now<(new Date).getTime()?(h.removeItem(t),null):n.hasOwnProperty(e)?n[e]:null:null}catch(t){}return null}function o(t){try{h.removeItem(t)}catch(t){}}function u(t,e){var r=n(t);if(e&&r&&r<(new Date).getTime()-e)try{h.removeItem(t)}catch(t){}}function i(t){try{var e=h.getItem(t);if(null!==e&&void 0!==e)return!0}catch(t){}return!1}function c(t,e,n){try{h.setItem(t,JSON.stringify({ttl:n||0,now:(new Date).getTime(),value:e}))}catch(t){}}function a(){var t=!1;try{if(h&&h.setItem)return h.setItem(y,d),t=h.getItem(y)!=d,h.removeItem(y),t&&(h=!1),!!h}catch(t){}return!1}function f(t){h=t,this.enabled=a()}function l(){return 1e9*Math.random()|0}function m(t,n,r){function u(){try{n()}finally{o(a)}}var i=t+"__MUTEX_x",a=t+"__MUTEX_y",f=function(){return e(a)};return c(i,g),f()?(r||setTimeout(function(){m(t,n)},0),!1):(c(a,g,40),e(i)!==g?(r||setTimeout(function(){f()!==g?setTimeout(function(){m(t,n)},0):u()},50),!1):(u(),!0))}function s(t,n,r,u){return function(){try{u()}finally{m(t,function(){if(e(n)!==r)throw t+" was locked by a different process while I held the lock";o(n)})}}}function v(t,n,r,o){r=r||5e3;var u=t+"__MUTEX",i=function(){return e(u)},a=g+":"+l(),f=function(){setTimeout(function(){v(t,n,r)},10)};if(i())return o||f(),!1;var w=s(t,u,a,n),h=m(t,function(){return i()?(o||f(),!1):(c(u,a,r),void(o||setTimeout(w,0)))},o);return!(!o||!h)&&(w(),!0)}function w(){var t=!1;try{window&&window.localStorage&&(t=window.localStorage)}catch(t){}f(t)}var h=!1,y="taLsTest",d="1",g=Date.now()+":"+l();return w(),{enabled:a(),get:e,set:c,remove:o,removeIfElapsed:u,has:i,getTimeStamp:n,setStorage:f,lock:function(t,e,n){v(t,e,n,!1)},attemptLock:function(t,e,n){return v(t,e,n,!0)}}});
define("overlays/Overlay",["api-mod","mixins/Events","overlays/utils","utils/array/flatten"],function(t,e,i,n){"use strict";var o=function(i,o){this.sourceElement=i,this.domParent=document.body,this.container=null,this.contentElement=null,t.mixin(this,new e("show","hide","destroy","positionDirty","hover","contentsUpdated")),t.bindAll(this,"show","hide","destroy"),n(Array.prototype.slice.call(arguments,1)).filter(function(t){return"function"==typeof t}).forEach(function(t){t.call(this)}.bind(this))};return o.prototype.isOpen=function(){return t.inDocument(this.container)},o.prototype.show=function(){return t.inDocument(this.container)?this:(this.domParent.appendChild(this.container),this.container.overlay=this,this.emit("append"),this.emit("show"),this)},o.prototype.hide=function(e){return t.inDocument(this.container)?(delete this.container.overlay,this.domParent.removeChild(this.container),this.emit("hide",{trigger:e}),this):this},o.prototype.destroy=function(t){return this.hide(t),this.emit("destroy",{trigger:t}),this.sourceElement=null,this.contentElement=null,this},o.prototype.reposition=function(){return this.emit("positionDirty"),this},o.prototype.updateContent=function(t){return this.contentElement.innerHTML="",i.injectContentWithDataAttrs(this.contentElement,this.sourceElement,t),this.emit("contentsUpdated"),this.reposition(),this},o});
define("overlays/styles/flyout",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.container=e.createElement("div",{"class":"ui_overlay ui_flyout"+(t?" "+t:"")}),this.contentElement=this.container}var i=function(t,e){return function(){n.call(this,e||this.sourceElement.getAttribute("data-flyout")||""),this.updateContent(t)}};return i});
define("overlays/position",["vanillajs","api-mod","overlays/utils","ta/Core/TA.Event","overlays/position/base"],function(t,n,e,o,r){"use strict";function i(t,o,i,u){return function(l,a,y,h){var x=r();return x.onPosition=function(){var r=n.getSize(this.arrow)||{x:0,y:0},x=s(l,this.sourceElement),p=x?n.getSize(x):{x:0,y:0},d=x?n.getPosition(x):{left:0,top:0},m=n.getSize(this.domParent),g=e.parseOffsets(f(l)),b=!x||a||c(this.sourceElement),v=e.parseOffsets(h);this.container.style.position=b&&!y?"fixed":"absolute";var L=n.getSize(this.container);x&&x.getAttribute("data-anchorWidth")&&(n.hasClass(document.body,"rtl")?(d.left+=p.x,p.x=Number(x.getAttribute("data-anchorWidth")),d.left-=p.x):p.x=Number(x.getAttribute("data-anchorWidth")));var C=function(t,n,e,o){if("function"==typeof t){var i=Math.floor(t(L,r,p,d,m,b))+n;return this.domParent===document.body&&(i=Math.max(i,e),i=Math.min(i,o)),i+"px"}return"auto"}.bind(this);t&&o&&i&&u&&!y&&(this.container.style.position="fixed");var T=Math.max(Math.min(v.x,(m.x-L.x)/2),0);this.container.style.left=C(t,g.x,T,Math.max(m.x-L.x-T,T)),this.container.style.right=C(i,g.x,T,Math.max(m.x-L.x-T,T)),this.container.style.top=C(o,g.y,-Number.MAX_VALUE,Number.MAX_VALUE),this.container.style.bottom=C(u,g.y,-Number.MAX_VALUE,Number.MAX_VALUE)},x}}function u(t,e){return function(){return function(){function o(){var o=n.getSize(this.container);this.container.style.position="fixed",t&&(n.hasClass(document.body,"rtl")?(this.container.style.right="50%",this.container.style.marginRight=-o.x/2+"px"):(this.container.style.left="50%",this.container.style.marginLeft=-o.x/2+"px")),e&&(this.container.style.top="50%",this.container.style.marginTop=-o.y/2+"px")}this.on("show",o),this.on("positionDirty",o)}}}function l(){return function(){return function(){function t(){n.addClass(this.container,"cssCentered")}this.on("show",t),this.on("positionDirty",t)}}}function s(t,e){return t&&t.length&&isNaN(t[0])?n.isElement(t[0])?t[0]:e&&n.find(t[0],e):e}function f(t){return t&&t.length&&isNaN(t[0])?t.slice(1):t}function c(t){for(;t;){if(t==document.body)return!1;if(t.style.position)return"fixed"==t.style.position;if(t.currentStyle&&"fixed"===t.currentStyle.position)return!0;if(window.getComputedStyle&&"fixed"===getComputedStyle(t).getPropertyValue("position"))return!0;t=t.parentNode}return!1}var a={};return a.above=i(function(t,e,o,r,i,u){return r.left+o.x/2-t.x/2-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-t.y-e.y-(u?n.scrollTop():0)}),a.below=i(function(t,e,o,r,i,u){return r.left+o.x/2-t.x/2-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.bottomRight=i(function(t,e,o,r,i,u){return r.left-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.bottomLeft=i(null,function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)},function(t,e,o,r,i,u){return i.x-(r.left+o.x)+(u?n.scrollLeft():0)}),a.left=i(function(t,e,o,r,i,u){return r.left-t.x-e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.right=i(function(t,e,o,r,i,u){return r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.on=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.wideside=i(function(t,e,o,r,i,u){return r.left>i.x-r.left-o.x?r.left-t.x-e.x-(u?n.scrollLeft():0):r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.center=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return i.y/2-t.y/2+(u?0:n.scrollTop())}),a.centerBelow=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.topCenter=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,n,e,o,r,i){return 0}),a.topLeft=i(null,function(t,e,o,r,i,u){return r.top-t.y-e.y-(u?n.scrollTop():0)},function(t,e,o,r,i,u){return i.x-(r.left+o.x)+(u?n.scrollLeft():0)}),a.movingCenter=u(!0,!0),a.movingCenterX=u(!0,!1),a.movingCenterY=u(!1,!0),a.cssCentered=l(),a.absolute=i(function(){return 0},function(){return 0}),a.framed=i(function(){return 0},function(){return 0},function(){return 0},function(){return 0}),a.offScreen=i(function(){return-1e4},function(){return-1e4}),a.noop=function(){return function(){}},o.queueForReady(function(){if(a.rightEvenInRtl=a.right,a.leftEvenInRtl=a.left,"undefined"!=typeof document&&n.hasClass(document.body,"rtl")){a.left=a.rightEvenInRtl,a.right=a.leftEvenInRtl;var t=a.bottomRight;a.bottomRight=a.bottomLeft,a.bottomLeft=t}},0,"initialize rtl position"),a});
define("overlays/options/matchWidth",["vanillajs","api-mod"],function(t,i){"use strict";var n=function(t){function n(){this.container&&t&&(i.setStyle(this.container,"width",i.getSize(t).x+"px"),this.emit("positionDirty"))}return function(){this.on("show",i.bind(n,this))}};return n});
define("overlays/options/closeOnDocClick",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.sourceElement&&e.containsElement(this.sourceElement,t.target)||e.containsElement(this.container,t.target)||t.target&&("option"===t.target.tagName||e.hasClass(t.target,"ui_dropdown")||e.getParent(t.target,"ui_dropdown"))||e.checkBrowser("ie")&&t.target&&"select"==t.target.tagName&&e.containsEvent(t.target,t)&&e.select(this.container,"input").indexOf(t.target)||this.hide("doc-click")}function i(t){return function(){var i=e.bind(n,this);this.on("show",function(){setTimeout(function(){this.isOpen()&&(e.addEvent(document,"click",i),t&&e.addEvent(document,"touchstart",i))}.bind(this),1)}).on("hide",function(){e.removeEvent(document,"click",i),t&&e.removeEvent(document,"touchstart",i)})}}var o=i(!0);return o.withoutTouchEvents=i(!1),o});
define("overlays/options/autoReposition",["vanillajs","overlays/options/repositionOnEvent"],function(o,n){return n(window,["resize","scroll"])});
define("overlays/options/fade",["lib/jquery-amd"],function(t){"use strict";function i(i){t(this.container).addClass(i),t(this.shade).addClass(i)}function n(i){t(this.container).removeClass(i),t(this.shade).removeClass(i)}var l=function(){},s="fade_in",a="fade_out",o=[function(t){i.call(this,t.cl)},function(t){i.call(this,s)},l,function(t){n.call(this,s)},l],c=[l,function(t){i.call(this,t.cl),i.call(this,s)},function(t){n.call(this,t.cl),n.call(this,s)},l,l],e=[l,l,l,function(t){i.call(this,t.out),i.call(this,a)},function(t){n.call(this,t.out),n.call(this,a)}],h=function(t,i,n){return function(){if(t){i=i!==!1,n=n!==!1;var l=this.show,s=this.hide,a=i&&n?o:i?c:e;a[0].call(this,t),i&&(this.show=function(){var i=arguments;l&&l.apply(this,i),a[1].call(this,t),setTimeout(function(){a[2].call(this,t)}.bind(this),t.len)}.bind(this)),n&&(this.hide=function(){var i=arguments;a[3].call(this,t),setTimeout(function(){a[4].call(this,t),s&&s.apply(this,i)}.bind(this),t.len)}.bind(this))}}};return h.NONE={cl:"fade_none",out:"fade_out_none",len:0},h.SHORT={cl:"fade_short",out:"fade_out_short",len:250},h.NORMAL={cl:"fade_normal",out:"fade_out_normal",len:500},h.LONG={cl:"fade_long",out:"fade_out_long",len:1e3},h});
define("overlays/options/closeOnScroll",["vanillajs","api-mod"],function(n,o){"use strict";var i=function(){this.on("show",function(){o.addEvent(window,"scroll",this.hide)}).on("hide",function(){o.removeEvent(window,"scroll",this.hide)})};return i});
define("overlays/options/centerArrowOnSrcElement",["vanillajs","api-mod"],function(t,i){"use strict";var o=function(t){function o(){if(t=t||this.sourceElement,this.container&&t&&this.arrow){var o=i.getCoords(this.container),r=i.getCoords(t),n=i.hasClass(this.container,"arrow_top")||i.hasClass(this.container,"arrow_bottom");if(n){var s=r.left+r.width/2,e=i.getSize(this.arrow).x/2,a=Math.max(e,Math.min(o.width-e,s-o.left));i.setStyle(this.arrow,{"left":a+"px","right":"auto","margin":"0 0 0 -"+e+"px"})}else{var s=r.top+r.height/2,e=i.getSize(this.arrow).y/2,h=Math.max(e,Math.min(o.height-e,s-o.top));i.setStyle(this.arrow,{"top":h+"px","bottom":"auto","margin":"-"+e+"px 0 0 0"})}}}return function(){this.on("show",i.bind(o,this)),this.on("positionDirty",i.bind(o,this)),this.on("repositionArrow",i.bind(o,this))}};return o});

define("overlays/options/repositionOnTaEvent",["vanillajs","ta/Core/TA.Event"],function(n,i){"use strict";return function(n){return function(){var t=this.emit.bind(this,"positionDirty");this.on("show",function(){i.on(n,t)}).on("hide",function(){i.off(n,t)})}}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"brand_login_callout","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","utils/localstorage","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","page-model","overlays/options/repositionOnTaEvent"],function(e,o,n,t,a,r,i,l,s,c,u,d,v,p,g,f){"use strict";var y,_=o(".core-login-button",".global-nav-profile"),m=o(".brand-login-test"),b=o(".brand-text",m),h=o("#brandLoginContainer"),w=g.session.pageServlet,O=g.GEO_ID,C=function(){return o(".ui_notification_container").length||o(".ui_overlay").length},k=function(){m.on("click",".ui_close_x",function(){y&&y.destroy()&&(y=null)}),y=new r(_.parent()[0],new i(m[0],"brand-callout ui_popover"),l.bottomLeft([-10,1]),u,p(_),c,s,v,f("showingCookieConsentBanner"),d(d.LONG,!1,!0)),y.show(),o("#brandLoginPopover").removeClass("hidden")},E=function(e,o){if(!require("page-model").session.loggedIn)return e&&k(),a.set(o,!0),void n.trackEventOnPage(o,"view","servletname_"+w)},S=function(){if(!C()){var e=h.attr("data-tracking-property")||"",o=m.length>0;a.has(e)||E(o,e)}},D=function(e){y&&y.destroy()&&(y=null),n.trackEventOnPage("pcb_campaign_callout_login","click","servletname_"+w,0,window.location.href),require("ta/registration/RegOverlay").show(e,e.target,{flow:"BRAND_SIGNUP_CORE_COMBINED",pid:40197,locationId:O}),e.preventDefault()};o(document).on("regUpdateMember",function(){h.length>0&&n.setEvtCookie("pcb_campaign_callout_Success","view","servletname_"+w,0,window.location.href)}),b.on("click",function(e){D(e)}),a.enabled&&("complete"===document.readyState?S():o(window).ready(S()))})});
define("ta/Core/TA.FireEvent",["vanillajs"],function(){var n={},e={};return n.on=function(n,t){var r=e[n];r||(r=e[n]=[]),r.push(t)},n.fireEvent=function(n,t){var r=Array.prototype.slice.call(arguments),i=e[n];r.shift(),i&&i.slice(0).forEach(function(n){try{n.apply(null,r)}catch(n){}})},n.off=function(n,t){if(t){var r,i=e[n];i instanceof Array&&(r=i.indexOf(t),r>=0&&i.splice(r,1))}else delete e[n]},n.hasEventListener=function(n){return!!e[n]},n});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"trip_planner_breadcrumbs","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent"],function(e,n){"use strict";function r(n){var r=document.getElementById(e.id);r&&(r.innerHTML=n.innerHTML)}return n.on("update-"+e.name,r),{}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_footer_pickers","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(e,t,o){"use strict";function a(t,o,a,r){t&&t.stopPropagation(),o.onclick=null,e.require(["trjs!styleguide/overlays/Flyout","trjs!overlays/support/widgets","trjs!overlays/support/remoteWidget","trcss!src/build/styleguide/ui_overlays/flyouts"],function(n,s,i){n(t,o,s(e),i(a,{},r))})}return{showPos:function(r,n){var s=t(e.element).find(".point_of_sale_data");a(r,n,"POS_PICKER",{pageFeature:s.data("page-feature")||window.pageFeature||"",localeCodes:s.data("locale-codes")||window.localeCodes||"",relativeUrl:document.location.pathname+(document.location.search||"")+(document.location.hash||"")});var i=s.data("currentLocale");o.trackEventOnPage("POS_PICKER","Open",i)},showCurrency:function(e,t){a(e,t,"CURRENCY_PICKER")}}})});
define("ta/util/ActionRecord",["vanillajs","ta/util/Deferred","utils/ajax","ns-exporter","ta/Core/TA.Record"],function(r,t,e,o,n){function a(r,o,a,i){var c=new t;a||(a={});var u={url:a.url||r,method:a.method||"get",data:{action:o},success:function(r){a.onSuccess&&a.onSuccess(r),c.resolve(r)},error:function(r){a.onFailure&&a.onFailure(r),c.reject(r)}};for(var d in a)if(a.hasOwnProperty(d)&&!u.hasOwnProperty(d))u[d]=a[d];else if("data"==d)for(d in a.data)a.data.hasOwnProperty(d)&&(u.data[d]=a.data[d]);if(i){var s=n._toEvtParams(i);for(d in s)s.hasOwnProperty(d)&&(u.data[d]=s[d])}return e(u),i&&n._trackEventAfterAjax(i),c.promise()}var i={record:function(r,t,e){return a("/ActionRecord",r,t,e)},recordPlus:function(r,t,e){return a("/ActionRecordPlus",r,t,e)},recordPid:function(r){new e("/ActionRecord?pid="+r)}};return o.exportTo(i,"ta.util.action"),i});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_partner_footer_links","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,n,t){"use strict";n(e.element).on("click",".inlineLink",function(){var e=n(this).parent(".footerLink").data("trackAction");e&&t.record("Footer"+e)})})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_social_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,t,i){"use strict";t(e.element).on("click",".footerLink",function(){var e=t(this).data("trackAction");e&&i.record("Footer_"+e)})})});
define("ta/util/Cookie",["vanillajs","ns-exporter"],function(e,o){var t=0,n=5e3,i={cookiePIDName:"NPID",ONE_DAY:864e5,ONE_HOUR:36e5,setPIDCookie:function(e){i.write(i.cookiePIDName,e,n,"/",window.cookieDomain)},removePIDCookie:function(){try{i.write(i.cookiePIDName,"",t,"/",window.cookieDomain)}catch(e){}},canSet:function(){return document.cookie="SessionTest=true",!!document.cookie.match("(^|;)\\s*SessionTest=true\\s*(;|$)")&&(document.cookie="SessionTest=; expires=Thu, 01 Jan 1970 00:00:01 GMT",!0)},readRaw:function(e){e=e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");var o=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]*)"));return!!o&&o[1]},remove:function(e,o,t){i.write(e,"",new Date(1e3),o,t)},write:function(e,o,t,n,i){"number"==typeof t&&(t=new Date(Date.now()+t)),document.cookie=e+"="+o+(t?"; expires="+t.toUTCString():"")+(n?"; path="+n:"")+(i?"; domain="+i:"")},setOneTimeCookieOnFQDN:function(e,o){return i.write(e,o,5e3),!0},setOneTimeCookie:function(e,o){return i.write(e,o,5e3,null,window.cookieDomain),!0}};return o.exportTo({setPID:i.setPIDCookie}),o.createNs(i,"ta.util","cookie"),i});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"homepage_tripadvisor_footer_links","handlers",["handlers"]);e(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(t,e,r,i){"use strict";function n(t){var e=t?t.srcElement||t.target:null;e&&e.getAttribute("data-pid")&&r.setPIDCookie(e.getAttribute("data-pid"))}return e(t.element).on("click",'.js_click[data-id="help_center"]',function(){var r=this,i=e(r).data("url");t.require(["trjs!brand/HelpCenterOverlay","trcss!src/build/required/help_center_overlay"],function(t){t.open(r,i)})}),e(t.element).on("click",".footerLink",function(t){var r="Footer_",n=e(this),a=n.data("trackAction");if(a){var o="_blank"==n.attr("target");n.is("a")&&!o?(t.preventDefault(),i.record(r+a).always(function(){window.location=n.attr("href")})):i.record(r+a)}}),{checkForPid:n}})});
define("ta/popups/CookieSettingsPanel",["ta/util/openNewTab","page-model"],function(e,n){return function(s){s&&s.stop();var o={en:451,en_UK:834,en_IE:835,en_ZA:2635,sv:720,no:721,da:1199,fr:1197,fr_BE:6409,fr_CH:6410,de:1201,de_AT:2719,de_CH:6431,el:1198,it:1202,it_CH:6432,es:1200,pl:1208,nl:1209,nl_BE:6411,fi:2968,hu:3049,cs:3128,sk:3233,pt_PT:13938,"default":451},i={en:8328,en_UK:8328,en_IE:8316,en_ZA:8324,sv:8322,no:8323,da:8310,fr:8312,fr_BE:8307,fr_CH:8326,de:8313,de_AT:8306,de_CH:8325,el:8314,it:8317,it_CH:8327,es:8321,pl:8319,nl:8318,nl_BE:8309,fi:8311,hu:8315,cs:8308,sk:8320,pt_PT:13939,"default":8328},t=n.isMobile?i:o,_=n.session&&n.session.posLocale&&t[n.session.posLocale]?t[n.session.posLocale]:t["default"],l="http://info.evidon.com/pub_info/"+_+"?v=1&nt=0";e(l)}});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_tripadvisor_horizontal_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/popups/CookieSettingsPanel","ta/util/ActionRecord"],function(e,t,i,o){"use strict";t(e.element).on("click",'.js_click[data-id="cookie-consent"]',function(){i()}),t(e.element).on("click",".footer_link",function(e){var i=t(this),n="Footer_",r=i.data("trackAction");r&&(i.is("a")&&(e.preventDefault(),o.record(n+r).always(function(){window.location=i[0].href})),o.record(n+r))})})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_pos_picker","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(e,n,i,t){"use strict";function o(i){var o=n(i).data("id"),r=n(e.element).find(".picker_dropdown").data("currentLocale");t.record("POS_PICKER_SELECT_POS_"+o+"_FROM_"+r).always(function(){window.location=i.href})}function r(){i.remove("TAPD","/",window.domain)}var a=n(".fixed_header",n(e.element));n(e.element).before(a);var d=n(e.element).find(".pos_item.selected")[0];d&&d.scrollIntoView(),n(e.element).on("click",".pos_link",function(e){e.preventDefault(),r(),o(this)})})});
define("ta/util/Currency",["vanillajs","ta/util/Cookie","common/trackingStreams","ns-exporter"],function(r,n,t,e){var o={},a="‏",i="؜",u=" ",c="‎";return o.formatCurrency=function(r,n,t,e){var a=n?n:"USD",i=window.currencySymbol[a],f=r;e||(f=o.formatThousands(Math.round(r)));var s=i[0],l=i[1],y=document.body.classList;return y.contains("lang_ar")?o.isCurrencyAbbreviation(s)?f+u+s+c:s+c+u+f:t?l?f+u+s:s+u+f:l?f+s:s+f},o.formatCurrencyRange=function(r,n,t,e){var c,f=document.body.classList;return c=f.contains("lang_ar")?u+"-"+i+u:ta.util.i18n.isRtl()?u+"-"+a+u:u+"-"+u,e?(r=o.formatCurrency(r,t,!0),n=o.formatCurrency(n,t,!0),r+c+n):(r=o.formatCurrency(r,t),n=o.formatCurrency(n,t),r+c+n)},o.isCurrencyAbbreviation=function(r){return/^[a-zA-Z]+[^a-zA-Z0-9]?$/i.test(r)},o.formatThousands=function(r){if("undefined"==typeof groupingSize||"undefined"==typeof groupingSeparator||groupingSize<1)return r;for(var n="",t=""+r,e=1;e<=t.length;e++)n=t.charAt(t.length-e)+n,e%groupingSize==0&&e<t.length&&(n=groupingSeparator+n);return n},o.setCurrencyAndReload=function(r,e){var o="SetCurrency";n.write(o,r,15e3),e=e?e+"|":"",t.trackEvent("CurrencyPicker","Select",e+r),location.reload(!0)},e.exportTo(o,"ta.util.currency"),o});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"homepage_currency_picker","handlers",["handlers"]);r(["widget","lib/jquery-amd","ta/util/Currency"],function(e,r,n){"use strict";function t(t){var d=r(e.element).find(".picker_dropdown").data("currentCurrency");n.setCurrencyAndReload(t,d)}var d=r(".fixed_header",r(e.element));return r(e.element).before(d),{setCurrencyAndReload:t}})});
define("vanillajs",[],function(){return{}});
define("utils/ajax",["lib/jquery-amd","ta/Core/TA.Record","utils/form-to-json"],function(e,t,i){function n(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}return function(r,a){r.substr||(a=r);var s=e.extend({},a,{dataFilter:function(e,t){return"json"==t&&(e=e.replace(/^\s*while\s*\([^)]*\);?/,"")),a&&a.dataFilter&&a.dataFilter.call(this,e,t),e}});s.xhrFields=s.xhrFields||{},s.xhrFields.withCredentials=!0,n(s.data)&&(s.data=i(s.data));var c=s.trackEvent;return c&&(e.extend(s,t._toEvtParams(c)),s.complete=function(){t._trackEventAfterAjax(c),a&&a.complete&&a.complete.apply(this,arguments)}),s.evalScripts&&(s.success=function(t,i,n){if(t&&t.substr){var r,s;e.parseHTML?(r=e(e.parseHTML(t,document,!0)),s=r.filter("script").add(r.find("script"))):(r=e("<div>"+t+"</div>"),s=r.find("script")),s.each(function(e,t){if(t.innerHTML)if(window.execScript)window.execScript(t.innerHTML);else if(window.eval)window.eval(t.innerHTML);else{var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.text=t.innerHTML,document.head.appendChild(i),document.head.removeChild(i)}})}a&&a.success&&a.success.apply(this,arguments)}),r.substr?e.ajax(r,s):e.ajax(s)}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_footer","handlers",["handlers"]);n(["placement","vanillajs","utils/ajax"],function(e,n,t){function a(){var n=window.location.pathname,t=n.indexOf("-"),a=n.length<=1?"Home":t>0?n.substring(1,t):n.substring(1);require(["trjs!ta/util/Element"],function(n){ta.util.element.trackWhenScrolledIntoView("#"+e.id,[a,"in_view","global_footer"])})}return a(),{getFullDisclaimerText:function(e){t({url:"/TAMGFooterAjax",success:function(n){e.parentElement&&(e.parentElement.innerHTML=n)},data:{"a":"SHOW_FULL_DISCLAIMER"},evalScripts:!0,method:"get"})}}})});
define("common/Radio",["vanillajs"],function(){function t(t){this.channel=t,this.events={},this.replies={}}var e={},n=/\s+/;return t.prototype.reply=function(t,e,r){return t.split(n).forEach(function(t){this.replies[t]||(this.replies[t]=[]),this.replies[t].push({callback:e,context:r||this})},this),this},t.prototype.request=function(t){if(!this.replies[t])return null;var e=[].slice.call(arguments,1),n=this.replies[t];return n=n[n.length-1],n.callback.apply(n.context,e)},t.prototype.requestMany=function(t){if(!this.replies[t])return null;var e=[].slice.call(arguments,1);return this.replies[t].map(function(t){return t.callback.apply(t.context,e)})},t.prototype.requestAll=function(t,e){if(!this.replies[t])return!0;var n=[].slice.call(arguments,1),r="function"==typeof e?e:function(t){return t===e};return this.replies[t].reduce(function(t,e){return t&&r(e.callback.apply(e.context,n))},!0)},t.prototype.requestEvery=t.prototype.requestAll,t.prototype.requestAny=function(t,e){if(!this.replies[t])return!1;var n=[].slice.call(arguments,1),r="function"==typeof e?e:function(t){return t===e};return this.replies[t].reduce(function(t,e){return t||r(e.callback.apply(e.context,n))},!1)},t.prototype.requestSome=t.prototype.requestAny,t.prototype.on=function(t,e,r){return t.split(n).forEach(function(t){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,context:r||this})},this),this},t.prototype.once=function(t,e,r){return t.split(n).forEach(function(t){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,context:r||this,single:!0})},this),this},t.prototype.one=t.prototype.once,t.prototype.off=function(t,e){return t.split(n).forEach(function(t){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return e&&t.callback!=e}))},this),this},t.prototype.trigger=function(t){if(this.events[t]){var e=[].slice.call(arguments,1);return this.events[t]=this.events[t].filter(function(t){return t.callback.apply(t.callback,e),!t.single}),this}},t.prototype.emit=t.prototype.trigger,t.prototype.clear=function(){return this.events={},this.replies={},this},function(n){return e[n]||(e[n]=new t(n))}});
define("ta/registration/RegEvents",["mixins/Events"],function(e){return new e("success")});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio","ta/registration/RegEvents"],function(e,o,n,t){"use strict";function a(){var e=o(window).scrollTop(),n=o(".persistent-icons",i),t=o(".global-nav-icons",n);if(t.length){var a=(o(".global-nav-logo"),o('[data-placement-name="global_nav_geopill"]'));if(a.is(":visible")){var s=i.height()-e;e<=0&&t.css({"position":"absolute","top":0}),s>0&&(e>0&&e<=50?t.css({"position":"absolute","top":e,"bottom":"auto"}):s<=50&&t.css({"position":"absolute","top":"auto","bottom":0}))}}}function s(){var e=o(".second-view",i),n=o(window).scrollTop(),t=o(".persistent-icons",i),a=o(".global-nav-icons",t);if(a.length){var s=o(".global-nav-mobile-web-rollout"),r=o(".global-nav-logo",s),l=o('[data-placement-name="global_nav_geopill"]');r.css({"display":"block"}),e.length&&l.is(":visible")&&(n=t.height()-r.height(),window.scroll(0,n),a.css({"position":"absolute","top":"auto","bottom":0}))}}function r(){var e=o(".global-nav-persistent",i);e.length&&e.toggleClass("fixed",o(window).scrollTop()>i.offset().top)}var i=o("#"+e.id),l=n("global-nav"),v=null,c=null;l.on("run-my-trips-test-3",function(){f(!1,!0)});var d=function(e){window.userLoggedIn=!0;var n=o("<div>").append(i.find(".global-nav-no-refresh"));i.html(e),i.find(".global-nav-no-refresh").each(function(e,t){o(t).replaceWith(n.find("#"+t.getAttribute("id"))[0])}),v&&v.hide("replace-el")}.bind(i),u=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};t.on("success",function(){e.requestAJAXPlacement(d,null,u())}),i.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();v&&v.hide("new-overlay");var a=i.find(n.data("element")).clone();if(a.length){var s=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(s,function(s,r,l,c,d){var u=new s(n[0],new r(a[0],"global-nav-flyout global-nav-menu"),l,c.bottomRight([0,1]),d);u.domParent=i.find(".global-nav-overlays-container")[0],u.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),u.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),v=u})}}),i.on("mouseenter",".subItem",function(e){o(this).siblings(".expandSubItem").removeClass("active")}),i.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),s=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(s,function(e,o,s,r){var i=new e(n[0],new o(t[0]),s,r);i.domParent=a[0],t.css("display","block"),i.show()})}}),i.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);v&&v.hide("new-overlay");var t=i.find(".global-nav-links-container li"),a=t.filter(":hidden"),s=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),r=o().add(a).add(s).clone(),l=i.find(".global-nav-links-menu-more").clone();l.prepend(r);var c=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(c,function(e,o,t,a,s){var r=new e(n[0],new o(l[0],"global-nav-flyout global-nav-menu"),t,a.bottomRight([0,1]),s);r.domParent=i.find(".global-nav-overlays-container")[0],r.show(),n.find(".ui_tab").addClass("hovering"),r.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),v=r})}),i.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,s,r,i){var v=new e(o,[n(null,"","help_center"),t,a.cssCentered(),s,r("/uvpages/helpCenterOverlay.html")]);v.show(),l.emit("overlay-show")})}),i.on("click",".masthead-saves",function(e){c?(v&&v.hide("new-overlay"),c&&c.destroy()&&(c=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(f(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var f=function(e,n,t){v&&v.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,s,r,l,d,u,f){var y=new a(o(".masthead-saves")[0],new s("","global-nav-flyout global-nav-utility trips-flyout-container"),r.withoutTouchEvents,l.bottomLeft([-20,-3]),d,u);y.domParent=i.find(".global-nav-overlays-container")[0],y.show(),i.find(".trips-flyout-container").addClass("hide-arrow"),v=y,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,s,r){setTimeout(function(){c=new window.MastheadSavesApp,c.start({inCreateTripFlow:e,runTest3:n}),y.on("hide",function(e){c&&c.destroy()&&(c=null),f.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),i.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(i);return i.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=i.find(n.data("element")).clone();if(t.length){if(v){if(v.sourceElement==this)return void(v.isOpen()?v.hide("close"):v.show());v.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,s,r,l,c){var d=new a(n[0],new s(t[0],"global-nav-flyout global-nav-utility"),r,l.bottomLeft([-20,-3]),c);d.domParent=i.find(".global-nav-overlays-container")[0],d.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),d.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),v=d})}}),i.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),n("inbox").on("has_unread_conversations",function(e){i.find(".global-nav-hamburger .ui_jewel.unread").removeClass("hidden"),i.find(".nav-sub-link.inbox .icon-and-jewel").removeClass("hidden")}),n("inbox").on("no_unread_conversations",function(e){i.find(".global-nav-hamburger .ui_jewel.unread").addClass("hidden"),i.find(".nav-sub-link.inbox .icon-and-jewel").addClass("hidden")}),s(),o(window).scroll(function(){require(["trjs!utils/throttle"],function(e){e(a(),0),e(r(),100)})}),{checkForPersistentIcons:a,checkForPersistentGlobalNav:r}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
require(["ta/p13n/placements"],function(n){var o=n.define.bind(n,"global_nav_action_inbox","handlers",["handlers"]);o(["placement","vanillajs","lib/jquery-amd","common/Radio","ta/Core/TA.Record"],function(n,o,e,i,t){function a(){var o=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","ta/registration/RegOverlay","trjs!unifiedinbox/inbox-lander","trcss!unified_inbox_lander"];require(o,function(o,i,t,a,d,c,u,v,h){var b=e(".inbox-nav-contents",l).clone()[0];if(b.classList.remove("hidden"),e(".login-cta",b).length){var w=e(".login-cta span",b);w.click(function(){r.destroy(),u.show({type:"dummy"},null,{flow:"CORE_COMBINED",pid:40187,userRequestedForce:!0,onSuccess:function(){e(".login-cta",l).remove(),e(".inbox-nav-dropdown",l).removeClass("with-login-cta"),window.setTimeout(function(){l=e("#"+n.id),s()},500)}.bind(this)})})}else for(var _,f=e(".js-inbox-lander-thread-list-item.loading",b),p=e(".inbox-masthead-wrapper",b),x=0;x<10;++x)_=f.clone(),_.removeClass("hidden"),p.append(_);r=new o(l[0],new i(b,"inbox-flyout-container"),t.withoutTouchEvents,a.bottomLeft([-20,-3]),d,c),r.show(),e(".login-cta",l).length||v.loadMastheadDropdown()})}function s(){e(".masthead-inbox-icon, .ui_jewel",l).click(function(){e(".ui_jewel",l).length&&e(".ui_jewel",l).hasClass("hidden")?t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",d):e(".ui_jewel",l).length&&t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","has_unread",d),e(".masthead-inbox-icon",l).attr("data-on-inbox")?window.location="/Inbox":e(".inbox-flyout-container").length&&r?r.destroy():a()}),i("inbox").on("thread_clicked",function(n){r&&r.destroy()}),i("inbox").on("has_unread_conversations",function(n){e(".ui_jewel",l).removeClass("hidden")}),i("inbox").on("no_unread_conversations",function(n){e(".ui_jewel",l).addClass("hidden")})}var r,l=e("#"+n.id),d=40186;return s(),{}})});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);r(["placement","lib/jquery-amd","page-model"],function(e,r,t){"use strict";var a=r("#"+e.id),o=null;a.on("click","a.login-button",function(e){o&&o.hide("replace-el");var a=r(".core-login-button").data("flowName");if("ATTRACTION_PRODUCT_COMBINED"===a)require("ta/registration/RegOverlay").show(e,e.target,{flow:a,pid:40102,userRequestedForce:"true",locationId:require("page-model").GEO_ID}),e.preventDefault();else if("BRAND_SIGNUP_CORE_COMBINED"===a){var i=t.session.pageServlet;require("ta/Core/TA.Record").trackEventOnPage("pcb_campaign_callout_login","click","servletname_"+i),require("ta/registration/RegOverlay","ta/Core/TA.Record").show(e,e.target,{flow:a,pid:40197,userRequestedForce:"true",locationId:require("page-model").GEO_ID}),e.preventDefault(),e.stopPropagation()}else require("ta/registration/RegOverlay").show(e,e.target,{flow:a,pid:427,userRequestedForce:"true"}),e.preventDefault()});var i=function(e,t){var a=r(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(r){/\/#\s*$/.test(e.href)||"_blank"==e.target?r.trackEventOnPage(t,"click",a):r.setEvtCookie(t,"click",a,0,e.href)})};a.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){i(this,"UtilityNav")}),a.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(r){r.trackEventOnPage("UtilityNav","open",e)})})})});
define("api-mod",["lib/jquery-amd","utils/browserutils","utils/throttle","utils/stopevent","utils/form-to-json","utils/to-array","utils/is-element"],function($,browser,throttle,stopEvent,formToJson,toArray,isElement){"use strict";var exports={};return exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=null;try{f=eval(fn)}catch(t){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(t){}}if(f&&"function"==typeof f)return f}return null},exports.bind=function(t,e){return Function.prototype.bind.apply(t,Array.prototype.slice.call(arguments,1))},exports.bindAll=function(t,e){if(arguments.length>1)Array.prototype.slice.call(arguments,1).forEach(function(e){t[e]=this.bind(t[e],t)},this);else for(var r in t)t.hasOwnProperty(r)&&(t[r]=this.bind(t[r],t));return t},exports.inDocument=function(t){return t=exports.find(t),!!t.parentNode&&11!==t.parentNode.nodeType},exports.addEvent=function(t,e,r){$(t).on(e,r)},exports.fireEvent=function(t,e,r){$(t).trigger(e,r)},exports.removeEvent=function(t,e,r){$(t).off(e,r)},exports.removePropertyEvent=function(t,e,r){"on"!==e.substr(0,2)&&(e="on"+e);var o=t.getAttribute(e);if(o){var n,s=r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");n=o.replace(new RegExp(s+"\\s*\\([^)]*\\);?|(ta\\.call|requireCallLast|requireCallIfReady)\\s*\\(\\s*['\"]\\s*"+s+"[^)]*\\);?"),""),t[e]=n.trim()}},exports.store=function(t,e,r){$(t).data(e,r)},exports.retrieve=function(t,e){return $(t).data(e)},exports.getSize=function(t){if(t=exports.find(t),!t)return null;if(/^(?:body|html)$/i.test(t.tagName)||t===window||t===document){var e=document.compatMode&&"CSS1Compat"!==document.compatMode?document.body:document.body.parentNode;return{x:e.clientWidth,y:e.clientHeight}}return{x:t.offsetWidth,y:t.offsetHeight}},exports.getPosition=function(t,e){if(e=$(e),t=$(t),e.length){var r=e.offset(),o=t.offset();return{left:o.left-r.left,top:o.top-r.top}}return t.offset()},exports.getCoords=function(t){if(t=exports.find(t),!t)return null;var e=this.getSize(t),r=this.getPosition(t);return{top:r.top,left:r.left,bottom:r.top+e.y,right:r.left+e.x,height:e.y,width:e.x}},exports.getOffsetParent=function(t){return $(t).offsetParent().get(0)},exports.getParent=function(t,e){if(t=exports.find(t),!t)return null;if(e){for(;t&&"html"!=t.tagName;t=t.parentNode)if(exports.hasClass(t,e))return t;return null}return t.parentNode},exports.elementOrParentMatches=function(t,e){if(e)for(;t;t=t.parentElement)if(e(t))return!0;return!1},exports.containsElement=function(t,e){if(t=exports.find(t),e=exports.find(e),!t||!e)return!1;for(;null!=e;){if(e===t)return!0;e=e.parentElement}return!1},exports.checkBrowser=function(t){var e=Array.prototype.slice.call(arguments);return e.some(function(t){return!!browser[t]})},exports.containsEvent=function(t,e){if(t=exports.find(t),!e||!t)return!1;var r=e.pageX,o=e.pageY,n=this.getCoords(t);return"fixed"!==$(this.getOffsetParent(t)||t).css("position")&&"undefined"!=typeof r&&"undefined"!=typeof o||(r=e.clientX,o=e.clientY),o>=n.top&&o<=n.bottom&&r>=n.left&&r<=n.right},exports.select=function(t,e){var r=Array.prototype.slice.call(arguments),o=r.length>1&&("string"==typeof r[0]?r.pop():r.shift())||document,n=r.shift();try{return $(n,o).get()}catch(t){return[]}},exports.addClass=function(t,e){$(t).addClass(e)},exports.removeClass=function(t,e){$(t).removeClass(e)},exports.toggleClass=function(t,e,r){$(t).toggleClass(e,r)},exports.hasClass=function(t,e){return t&&$(t).hasClass(e)},exports.destroy=function(t){$(t).remove().get()},exports.find=function(t,e){try{return $(t,e||document)[0]}catch(t){}},exports.scrollTop=function(){var t=void 0!==window.pageYOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop},exports.scrollLeft=function(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft},exports.createElement=function(t,e){var r=document.createElement(t);return e&&$(r).attr(e),r},exports.isElement=isElement,exports.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},exports.adopt=function(t,e){$(t).append(Array.prototype.slice.call(arguments,1))},exports.setStyle=function(t,e,r){$(t).css(e,r)},exports.stopEvent=stopEvent,exports.mixin=function(t,e){return Array.prototype.slice.call(arguments,1).forEach(function(e){for(var r in e)t[r]=e[r]},t),t},exports.merge=function(t,e){for(var r=Array.prototype.slice.call(arguments,1),o=0,n=r.length;o<n;o++)for(var s in r[o])r[o].hasOwnProperty(s)&&(t[s]=r[o][s]);return t},exports.getFormData=function(t){return formToJson($(t).get(0))},exports.toFormQueryString=function(t){var e=[];t&&"FORM"===t.nodeName&&(t=exports.getFormData(t));for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o&&"object"==typeof o)for(var n=0;o.length&&n<o.length;++n){var s=o[n];s="object"==typeof s?"":String(s),e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}else e.push(encodeURIComponent(r)+"="+encodeURIComponent(String(o)))}return e.join("&")},exports.toArray=toArray,exports.throttled=throttle,exports.forceReflow=function(t){$(t).each(function(t,e){e.offsetWidth})},exports.stripTags=function(t,e,r){e=e||"";var o=r?"<"+e+"(?!\\w)[^>]*>([\\s\\S]*?)</"+e+"(?!\\w)>":"</?"+e+"([^>]+)?>";return t.replace(new RegExp(o,"gi"),"")},exports});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","utils/localstorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.get(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_links","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var t=n("#"+a.id),e=n('[data-placement-name="global_nav_links"]'),i=function(a,t){var e=n(a).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(n){/\/#\s*$/.test(a.href)||"_blank"==a.target?n.trackEventOnPage(t,"click",e):n.setEvtCookie(t,"click",e,0,a.href)})};e.on("click","a.global-nav-link[data-tracking-label]",function(){i(this,"TopNav")}),e.on("click","a.subLink",function(){var a=n("[data-active-menu-trigger][data-tracking-label]",t);a.data("trackingLabel")+"_sublink";i(this,"TopNav")})})});
define("ta/Core/TA.Store",["vanillajs","ns-exporter","ta/util/Object"],function(e,r,t){"use strict";var n={},a={};return a.store=function(e,r){return n[e]=r,r},a.retrieve=function(e){return n[e]},a.has=function(e){return"undefined"!=typeof n[e]},a.retrieveOrStore=function(e,r){var t=n[e];return"undefined"==typeof t&&(n[e]=r,t=r),t},a.remove=function(e){var r=n[e];return delete n[e],r},a.keep=function(e,r){var t,n=a.retrieve(e);t=n?n instanceof Array?n:[n]:[],r instanceof Array?r.forEach(function(e){t.contains(e)||t.push(e)}):t.push(r),a.store(e,t)},a.merge=function(e,r){a.store(e,t.merge(a.retrieve(e)||{},r))},a.asInt=function(e,r){var t=parseInt(a.retrieve(e));return isNaN(t)?r||0:t},a.asFloat=function(e,r){var t=parseFloat(a.retrieve(e));return isNaN(t)?r||0:t},a.executeCallbacks=function(e){if(a.has(e)){var r=a.retrieve(e);if(!r instanceof Array)return;for(var t=0;t<r.length;t++)r[t]()}},r.exportTo(a,"ta"),a});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);t(["placement","ta/Core/TA.Store"],function(e,t){function r(){if(e.params&&"typeahead_to_store"in e.params){var r=e.params.typeahead_to_store;if(r)for(var n in r)r.hasOwnProperty(n)&&t.store(n,r[n])}}r();var n=t.retrieve("typeahead_dual_search_options");return document.activeElement===document.getElementById("GEO_SCOPED_SEARCH_INPUT")?e.require(["trjs!deferred/lateHandlers"],function(e){e.whereFocused({type:"dummy"},document.activeElement)}):document.activeElement===document.getElementById("mainSearch")&&e.require(["trjs!deferred/lateHandlers"],function(e){e.whatFocused({type:"dummy"},document.activeElement)}),{getOptions:function(){return n}}})});
